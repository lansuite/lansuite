"use strict";(self.webpackChunklansuite_documentation=self.webpackChunklansuite_documentation||[]).push([[7924],{5287:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"getting-started/installation","title":"Installation","description":"Sadly there is no current official release, we are on that!","source":"@site/docs/getting-started/installation.md","sourceDirName":"getting-started","slug":"/getting-started/installation","permalink":"/lansuite/docs/getting-started/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/lansuite/lansuite/tree/master/website/docs/getting-started/installation.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"installation","title":"Installation","sidebar_position":2},"sidebar":"documentationSidebar","previous":{"title":"Requirements","permalink":"/lansuite/docs/getting-started/requirements"},"next":{"title":"Configuration","permalink":"/lansuite/docs/getting-started/configuration"}}');var i=t(4848),s=t(8453);const r={id:"installation",title:"Installation",sidebar_position:2},a="LanSuite Release",d={},l=[{value:"Preparation",id:"preparation",level:2},{value:"Create build environment",id:"create-build-environment",level:3},{value:"Fetch source code",id:"fetch-source-code",level:3},{value:"Prepare to run",id:"prepare-to-run",level:3},{value:"Upload to target - if needed",id:"upload-to-target---if-needed",level:3},{value:"Create Database and database user",id:"create-database-and-database-user",level:3},{value:"Installation",id:"installation",level:2},{value:"Installation Wizard",id:"installation-wizard",level:3},{value:"Docker",id:"docker",level:2},{value:"Docker with a database dump",id:"docker-with-a-database-dump",level:2},{value:"<code>ERROR: Couldn&#39;t connect to Docker daemon</code>",id:"error-couldnt-connect-to-docker-daemon",level:3},{value:"<code>ERROR: for web  Cannot start service web</code>",id:"error-for-web--cannot-start-service-web",level:3},{value:"<code>ERROR: Version in &quot;./docker-compose.yml&quot; is unsupported. You might be seeing this error because you&#39;re using the wrong Compose file version.</code>",id:"error-version-in-docker-composeyml-is-unsupported-you-might-be-seeing-this-error-because-youre-using-the-wrong-compose-file-version",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"lansuite-release",children:"LanSuite Release"})}),"\n",(0,i.jsx)(n.p,{children:"Sadly there is no current official release, we are on that!\n!DO NOT USE THE V4.2 Release from 2015!"}),"\n",(0,i.jsx)(n.h1,{id:"lansuite-development-branch",children:"LanSuite development branch"}),"\n",(0,i.jsx)(n.h2,{id:"preparation",children:"Preparation"}),"\n",(0,i.jsx)(n.h3,{id:"create-build-environment",children:"Create build environment"}),"\n",(0,i.jsx)(n.p,{children:"First of all you need to take an inventory of the tools at your disposal.\nFollowing tools are relevant:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A machine with a configured web- and database server fulfilling the requirements as listed on ",(0,i.jsx)(n.a,{href:"/lansuite/docs/getting-started/requirements",children:"the requirements page"})]}),"\n",(0,i.jsxs)(n.li,{children:["A PHP environment with Composer for local/remote installations (here guides for ",(0,i.jsx)(n.a,{href:"https://www.thecodedeveloper.com/install-composer-windows-xampp/",children:"Windows"})," and ",(0,i.jsx)(n.a,{href:"https://getcomposer.org/download/",children:"Linux"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://www.docker.com/community-edition",children:"Docker Community Edition"})," to run the container"]}),"\n",(0,i.jsx)(n.li,{children:"Git (recommended, either as command-line or GUI)\nIt is required that you have at least a PHP environment with composer available if you do not want to run the Docker container."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"fetch-source-code",children:"Fetch source code"}),"\n",(0,i.jsxs)(n.p,{children:["In any case you will need to fetch the latest version from GitHub.\nThe recommended way would be to use Git to obtain a working copy by running ",(0,i.jsx)(n.code,{children:"git clone https://github.com/lansuite/lansuite.git"})," in a command line within the working folder.\nThis is the recommendation as it simplifies later updates."]}),"\n",(0,i.jsxs)(n.p,{children:["Alternatively a snapshot of the current source code branch can be downloaded from the project page(e.g. ",(0,i.jsx)(n.a,{href:"https://github.com/lansuite/lansuite/archive/master.zip",children:"https://github.com/lansuite/lansuite/archive/master.zip"})," for the master).\nThis must be extracted before usage (e.g. with ",(0,i.jsx)(n.code,{children:"unzip master.zip"}),"(Linux) or with a tool like WinZip,WinRAR or 7zip(Windows)."]}),"\n",(0,i.jsx)(n.h3,{id:"prepare-to-run",children:"Prepare to run"}),"\n",(0,i.jsxs)(n.p,{children:["After preparing a build environment and obaining the sources you must run a few steps to prepare the solution for deployment.\nOpen a command line window, browse via ",(0,i.jsx)(n.code,{children:"cd <path>"})," to the folder prepared and execute ",(0,i.jsx)(n.code,{children:"composer install --no-dev --optimize-autoloader"}),"to prepare all dependencies.\nIf you are on a Linux system, you may also need to fix access rights by runnning the following:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"$ chmod a+rw ./inc/base/config.php\n$ chmod -R a+rwX ./ext_inc/\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In that case it may also be advised to correct file ownership of the folder to the webserver user and group by running ",(0,i.jsx)(n.code,{children:"chown -R <user>:<group> ."})," additionally."]}),"\n",(0,i.jsx)(n.h3,{id:"upload-to-target---if-needed",children:"Upload to target - if needed"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"If you have no direct access to the command line on the target system or no way to run the required tools there"})}),"\n",(0,i.jsxs)(n.p,{children:["If you had to run the steps above on a different system then you'll need to upload the prepared code to your target\nUse a (S)FTP-client then to upload the whole folder to your webspace.\nEnsure that file permissions are properly set so that the webserver user is able to write both to the file ",(0,i.jsx)(n.code,{children:"/inc/base/config.php"})," and the folder ",(0,i.jsx)(n.code,{children:"./ext_inc/"})," and it's contents."]}),"\n",(0,i.jsx)(n.h3,{id:"create-database-and-database-user",children:"Create Database and database user"}),"\n",(0,i.jsx)(n.p,{children:'If not provided you need to create a database user and database for LanSuite to store its data in.\nWhile it is possible to share a database with a different application it is not recommended to do so, for both usability and security reasons.\nThe database user should only have privileges on the lansuite database and should only be able to connect from the webserver host, in most cases "localhost".\nAt the current point in time there is no separation between installation/update privileges and privileges for normal operation.\nThus, all privileges on the new database (and only there!) need to be granted to the lansuite database user.'}),"\n",(0,i.jsx)(n.p,{children:"Native SQL-Statements as reference:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"CREATE DATABASE lansuite;\nCREATE USER 'lansuite'@'localhost' IDENTIFIED BY '<strongpasswordhere>';\nGRANT ALL ON lansuite.* TO 'lansuite'@'localhost';\n"})}),"\n",(0,i.jsx)(n.p,{children:"It is recommended to do this before continuing with the application installation as the credentials, database and server names will be needed during the Installation Wizzard phase."}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsxs)(n.p,{children:['Once the source code files are ready for use and the database has been set up you can start the installation wizard by accessing the destination folder.\nIf you end up with a blank page or a "page not found"-error then check if browsing to  e.g. ',(0,i.jsx)(n.code,{children:"lansuite/index.php"})," works.\nIn that case the webserver is not configured to serve index.php by default and should be configured accordingly.\nIf that also does not help then check the server error logs as these will provide a hint at what went wrong."]}),"\n",(0,i.jsx)(n.h3,{id:"installation-wizard",children:"Installation Wizard"}),"\n",(0,i.jsx)(n.p,{children:"Once the initial page loads you should see the guided installation wizard that should help to create the required database scheme, configure essential settings, and create a first user.\nOnce that is done, the installation is ready for use."}),"\n",(0,i.jsx)(n.h2,{id:"docker",children:"Docker"}),"\n",(0,i.jsxs)(n.p,{children:["We assume that you have a running ",(0,i.jsx)(n.a,{href:"https://www.docker.com/community-edition",children:"Docker Community Edition"})," installed."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"$ git clone https://github.com/lansuite/lansuite.git\n$ cd lansuite\n$ touch ./inc/base/config.php\n$ # Add the content of the example configuration file below into ./inc/base/config.php\n$ chmod a+rw ./inc/base/config.php\n$ chmod -R a+rwX ./ext_inc/\n$ cp docker/mysql.env.dist docker/mysql.env\n$ docker-compose up\n$ docker-compose run php composer install\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This will start a ",(0,i.jsx)(n.a,{href:"https://nginx.org/",children:"Nginx webserver"})," with a ",(0,i.jsx)(n.a,{href:"https://secure.php.net/manual/en/install.fpm.php",children:"php-fpm"})," configuration and a ",(0,i.jsx)(n.a,{href:"https://www.mysql.com/",children:"MySQL database"})," for you.\nAfter everything started you should be able to visit http://",(0,i.jsx)(n.code,{children:"<Your-Docker-IP>"}),":8080/ and see a running LanSuite-System."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Warning"}),": This Docker setup should not be used for production. It contains a debugging setup like ",(0,i.jsx)(n.a,{href:"https://xdebug.org/",children:"Xdebug"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"docker-with-a-database-dump",children:"Docker with a database dump"}),"\n",(0,i.jsx)(n.p,{children:"If you have already a running website based on LanSuite, you can also start a docker based setup with a copy of your database.\nIt comes handy to test the new features with your dataset."}),"\n",(0,i.jsxs)(n.p,{children:["This guide assumes that you have already a copy of your database in a single SQL file.\nIf you don't have one, you can create one with tools like ",(0,i.jsx)(n.a,{href:"https://dev.mysql.com/doc/refman/5.7/en/mysqldump-sql-format.html",children:"mysqldump"}),", ",(0,i.jsx)(n.a,{href:"https://www.phpmyadmin.net/",children:"PHPMyAdmin"})," or ask your hoster for a copy."]}),"\n",(0,i.jsxs)(n.p,{children:["Move your database dump into the root folder of LanSuite and name it ",(0,i.jsx)(n.code,{children:"database-dump.sql"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"$ mv /your/db/dump.sql /lansuite/copy/database-dump.sql\n"})}),"\n",(0,i.jsxs)(n.p,{children:["After this, you can start the ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/",children:"docker-compose"})," setup via"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"$ docker-compose -f docker-compose.yml -f docker-compose.dump.yml up\n"})}),"\n",(0,i.jsx)(n.h1,{id:"common-issues",children:"Common issues"}),"\n",(0,i.jsx)(n.h3,{id:"error-couldnt-connect-to-docker-daemon",children:(0,i.jsx)(n.code,{children:"ERROR: Couldn't connect to Docker daemon"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Some distributions (e.g. Fedora) restrict access to the docker daemon socket to user ",(0,i.jsx)(n.code,{children:"root"})," only.\nThis results in a error message as ",(0,i.jsx)(n.code,{children:"ERROR: Couldn't connect to Docker daemon at http+docker://localunixsocket - is it running?"}),"\nRun the two ",(0,i.jsx)(n.code,{children:"docker-compose"})," commands as user ",(0,i.jsx)(n.code,{children:"root"})," (via ",(0,i.jsx)(n.code,{children:"su"}),"or ",(0,i.jsx)(n.code,{children:"sudo"}),") in that case."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"error-for-web--cannot-start-service-web",children:(0,i.jsx)(n.code,{children:"ERROR: for web  Cannot start service web"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["A different issue exists in Docker for Windows: If you get an error like: ",(0,i.jsx)(n.code,{children:'ERROR: for web  Cannot start service web: OCI runtime create failed: container_linux.go:348: starting container process caused "process_linux.go:402: container init caused \\"rootfs_linux.go:58: mounting \\\\\\"/c/xampp/htdocs/lansuite/.docker/nginx-development.conf\\\\\\" to rootfs \\\\\\"/mnt/sda1/var/lib/docker/aufs/mnt/a302993ced4b16d16c0ab56c001d97fbdb9742f2f5beff079b18be797e95ff2a\\\\\\" at \\\\\\"/mnt/sda1/var/lib/docker/aufs/mnt/a302993ced4b16d16c0ab56c001d97fbdb9742f2f5beff079b18be797e95ff2a/etc/nginx/conf.d/default.conf\\\\\\" caused \\\\\\"not a directory\\\\\\"\\"": unknown: Are you trying to mount a directory onto a file (or vice-versa)? Check if the specified host path exists and is the expected type'}),"\nThen you need to enable drive sharing for the host drive the docker image is stored on as described on ",(0,i.jsx)(n.a,{href:"http://peterjohnlightfoot.com/docker-for-windows-on-hyper-v-fix-the-host-volume-sharing-issue/",children:"Fix the Host Volume Sharing issue"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"error-version-in-docker-composeyml-is-unsupported-you-might-be-seeing-this-error-because-youre-using-the-wrong-compose-file-version",children:(0,i.jsx)(n.code,{children:'ERROR: Version in "./docker-compose.yml" is unsupported. You might be seeing this error because you\'re using the wrong Compose file version.'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Your ",(0,i.jsx)(n.code,{children:"docker-compose"})," version is most likely outdated. Currently LanSuite uses the Compose file format v3.0, hence you need at least Compose version 1.10.0 or higher. If you have installed it using your distribution's package manager please uninstall it and follow ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/install/",children:"the official installation guide"})," on how to install a more-recent version."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(6540);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);