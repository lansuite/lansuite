<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/upgrade" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">Upgrade to a newer version | LANSuite</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lansuite.github.io/lansuite/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://lansuite.github.io/lansuite/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://lansuite.github.io/lansuite/docs/guides/upgrade/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Upgrade to a newer version | LANSuite"><meta data-rh="true" name="description" content="Prerequisites"><meta data-rh="true" property="og:description" content="Prerequisites"><link data-rh="true" rel="icon" href="/lansuite/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lansuite.github.io/lansuite/docs/guides/upgrade/"><link data-rh="true" rel="alternate" href="https://lansuite.github.io/lansuite/docs/guides/upgrade/" hreflang="en"><link data-rh="true" rel="alternate" href="https://lansuite.github.io/lansuite/docs/guides/upgrade/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/lansuite/blog/rss.xml" title="LANSuite RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/lansuite/blog/atom.xml" title="LANSuite Atom Feed"><link rel="stylesheet" href="/lansuite/assets/css/styles.5085fbbe.css">
<script src="/lansuite/assets/js/runtime~main.1cb3c60a.js" defer="defer"></script>
<script src="/lansuite/assets/js/main.1dbcdbc5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/lansuite/"><div class="navbar__logo"><img src="/lansuite/img/logo.svg" alt="LANSuite Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/lansuite/img/logo.svg" alt="LANSuite Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">LANSuite</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/lansuite/docs/category/getting-started/">Documentation</a><a class="navbar__item navbar__link" href="/lansuite/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lansuite/lansuite" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/lansuite/docs/category/getting-started/">Getting Started</a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lansuite/docs/getting-started/requirements/">Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lansuite/docs/getting-started/installation/">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lansuite/docs/getting-started/configuration/">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lansuite/docs/getting-started/settings/">Settings</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/lansuite/docs/category/guides/">Guides</a><button aria-label="Collapse sidebar category &#x27;Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/lansuite/docs/guides/upgrade/">Upgrade to a newer version</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/lansuite/docs/category/development/">Development</a><button aria-label="Collapse sidebar category &#x27;Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lansuite/docs/development/api-docs/">Generating API docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lansuite/docs/development/cache/">Using the LANSuite cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lansuite/docs/development/coding-style-guide/">Coding style guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lansuite/docs/development/documentation/">Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lansuite/docs/development/production-release/">Creating a Release</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lansuite/docs/development/folder-structure/">Folder structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lansuite/docs/development/performance-measurement/">Performance measurement</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/lansuite/docs/category/modules/">Modules</a><button aria-label="Collapse sidebar category &#x27;Modules&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lansuite/docs/modules/settings/">Settings</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/lansuite/docs/category/other/">Other</a><button aria-label="Collapse sidebar category &#x27;Other&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lansuite/docs/other/users/">Users of LanSuite</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/lansuite/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/lansuite/docs/category/guides/"><span itemprop="name">Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Upgrade to a newer version</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Upgrade to a newer version</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<ul>
<li>Your target system needs to run PHP &gt;= 8.1 and MySQL &gt;= 5.7</li>
<li>A fair bit of time</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="preparation">Preparation<a href="#preparation" class="hash-link" aria-label="Direct link to Preparation" title="Direct link to Preparation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-communications">Upgrade communications<a href="#upgrade-communications" class="hash-link" aria-label="Direct link to Upgrade communications" title="Direct link to Upgrade communications">​</a></h3>
<p>It is recommended to tell your users (and fellow administrators) in advance that your LanSuite instance won&#x27;t be 100% functional available during the upgrade.</p>
<p>That should be well done in advance if you run a larger installation, for smaller ones no one may notice. But better be safe than sorry.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="download-an-official-release">Download an official release<a href="#download-an-official-release" class="hash-link" aria-label="Direct link to Download an official release" title="Direct link to Download an official release">​</a></h3>
<ol>
<li>Download the release from <a href="https://github.com/lansuite/lansuite/releases" target="_blank" rel="noopener noreferrer">GitHubs Releases page</a></li>
<li>Extract the archive on your machine</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-system-to-read-only">Set system to read-only<a href="#set-system-to-read-only" class="hash-link" aria-label="Direct link to Set system to read-only" title="Direct link to Set system to read-only">​</a></h3>
<p>It is recommended to lock your installation and avoid changes during/after the backup.
This can either be done by either of the following:</p>
<ul>
<li>Lock LanSuite by enabling the corresponding option under &quot;Admin-Page&quot; -&gt; &quot;Common Settings&quot; -&gt; &quot;Lock LanSuite page&quot;</li>
<li>Shut down public access to your web server</li>
<li>Move index.php to a different location</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="execute-a-backup">Execute a backup<a href="#execute-a-backup" class="hash-link" aria-label="Direct link to Execute a backup" title="Direct link to Execute a backup">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="backup-the-database">Backup the database<a href="#backup-the-database" class="hash-link" aria-label="Direct link to Backup the database" title="Direct link to Backup the database">​</a></h4>
<p>Create a full database backup before upgrading.</p>
<p>There are multiple variants available:</p>
<ul>
<li>LanSuite XML export (&quot;Admin-Page&quot; -&gt; &quot;Export&quot; -&gt; &quot;XML - Full Database&quot;)</li>
<li>MySQL commandline dump (Something like <code>mysqldump --quick -u&lt;ls user&gt; -p &lt;dbname&gt; &gt; exportfile.sql</code>)</li>
<li>PHPMyAdmin - if installed</li>
<li>Any tool provided by your hoster</li>
</ul>
<p>Backing up your database using <code>mysqldump</code> is recommended, as both, LanSuite and PHPMyAdmin, may hit server limits on larger installations.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="backup-your-current-installation">Backup your current installation<a href="#backup-your-current-installation" class="hash-link" aria-label="Direct link to Backup your current installation" title="Direct link to Backup your current installation">​</a></h4>
<ul>
<li>If you have command line access: <code>tar cfvz ls_backup.tar.gz &lt;ls_folder&gt;</code> or <code>cp -R &lt;ls_folder&gt; &lt;ls_folder&gt;.backup</code></li>
<li>Download the whole folder with (S)FTP or any other remote access tool you have available</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="server-upload">Server Upload<a href="#server-upload" class="hash-link" aria-label="Direct link to Server Upload" title="Direct link to Server Upload">​</a></h3>
<p>Upload all files into a different folder to your server.
If you executed the previous step already on your server, then obviously nothing to be done at this step.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade">Upgrade<a href="#upgrade" class="hash-link" aria-label="Direct link to Upgrade" title="Direct link to Upgrade">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="copy-over-files-from-an-old-installation">Copy over files from an old installation<a href="#copy-over-files-from-an-old-installation" class="hash-link" aria-label="Direct link to Copy over files from an old installation" title="Direct link to Copy over files from an old installation">​</a></h3>
<p>Replace the new files with the old ones.</p>
<p>A few files and locations are unique to your installation.
Those should be kept.
Like:</p>
<ul>
<li>The base configuration file from <code>inc/base/config.php</code></li>
<li>Anything under <code>ext_inc</code></li>
<li>Custom designs from <code>designs/</code></li>
</ul>
<p>Copy them to the same place on the new installation, overwriting everything there.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-environmentconfigured">Configuration: <code>environment.configured</code><a href="#configuration-environmentconfigured" class="hash-link" aria-label="Direct link to configuration-environmentconfigured" title="Direct link to configuration-environmentconfigured">​</a></h3>
<p>In order to simplify some configuration steps and updates it is recommended to reset the configuration back to unconfigured and run through the installer again.
This updates tables and menu entries and configures some standard options.
This can be done by editing the following line in <code>inc/base/config.php</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[environment]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">configured = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>...just <em>DO NOT select the option to overwrite the existing DB</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-specific-release-tasks">Run specific release tasks<a href="#run-specific-release-tasks" class="hash-link" aria-label="Direct link to Run specific release tasks" title="Direct link to Run specific release tasks">​</a></h3>
<p>It may be required to run additional steps to prepare everything for the new version.
Please check the upgrade guide to your specific version below.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="execute-lansuite-upgrade-logic">Execute LanSuite upgrade logic<a href="#execute-lansuite-upgrade-logic" class="hash-link" aria-label="Direct link to Execute LanSuite upgrade logic" title="Direct link to Execute LanSuite upgrade logic">​</a></h3>
<p>Visit &quot;Admin-Page&quot; -&gt; &quot;Lansuite updaten / reparieren&quot; -&gt;&gt; &quot;Datenbank updaten und verwalten&quot;.
This is also available at <code>http(s)://&lt;your-domain&gt;/index.php?mod=install&amp;action=db</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-your-installation">Test your installation<a href="#test-your-installation" class="hash-link" aria-label="Direct link to Test your installation" title="Direct link to Test your installation">​</a></h3>
<p>Now is the time to look if everything is as expected.
If yes, then you are good to unlock the installation.
If not then either see what broke in the various logs or go to Rollback.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unlock-installation">Unlock installation<a href="#unlock-installation" class="hash-link" aria-label="Direct link to Unlock installation" title="Direct link to Unlock installation">​</a></h3>
<p>If you locked your installation, you  can now unlock it again.
&quot;Admin-Page&quot; -&gt; &quot;Common Settings&quot; -&gt; &quot;Lock LanSuite page&quot;.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rollback-if-things-doesnt-work">Rollback (if things doesn&#x27;t work)<a href="#rollback-if-things-doesnt-work" class="hash-link" aria-label="Direct link to Rollback (if things doesn&#x27;t work)" title="Direct link to Rollback (if things doesn&#x27;t work)">​</a></h2>
<p>In case your upgrade failed, and you need to return to your old state the following needs to be done:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="import-db-backup">Import DB backup<a href="#import-db-backup" class="hash-link" aria-label="Direct link to Import DB backup" title="Direct link to Import DB backup">​</a></h3>
<p>You have to reimport the database backup taken before.
How this is done varies in what tools you have available.
The command line call for this would be <code>mysql -u&lt;ls_user&gt; -p &lt; exportfile.sql</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="restore-folder-backup">Restore folder backup<a href="#restore-folder-backup" class="hash-link" aria-label="Direct link to Restore folder backup" title="Direct link to Restore folder backup">​</a></h3>
<p>Next step is to restore the folder backup taken.
First clean up (<code>rm -rf &lt;failed_update_folder&gt;</code>) or move away (<code>mv &lt;failed_update_folder&gt; &lt;anyothername&gt;</code>) the failed installation.
Then restore the original installation from your backup.
Either by extracting (<code>gunzip ls_backup.tar.gz &amp;&amp; tar xvf ls_backup.tar</code>) or moving back the copied folder (<code>mv &lt;ls_folder&gt;.backup &lt;ls_folder&gt;</code>).
Or: Re-uploading your backup, if that was the way you went.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pitfalls-and-known-bugs">Pitfalls and Known Bugs<a href="#pitfalls-and-known-bugs" class="hash-link" aria-label="Direct link to Pitfalls and Known Bugs" title="Direct link to Pitfalls and Known Bugs">​</a></h2>
<ul>
<li>Please ensure that export and import of Database images use the same character encoding. Using the same client on the same system should ensure this, but be cautious if dump and import are done on different systems/clients.</li>
<li>The git <code>master</code> branch is not usable without pulling in additional resources via composer. You must do this first to obtain a runnable installation!</li>
<li>IP Addresses from existing log entries are removed due to a change of the column format for IPv6 support</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-from-lansuite-v42-to-v50">Upgrade from LanSuite v4.2 to v5.0<a href="#upgrade-from-lansuite-v42-to-v50" class="hash-link" aria-label="Direct link to Upgrade from LanSuite v4.2 to v5.0" title="Direct link to Upgrade from LanSuite v4.2 to v5.0">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-databasesqlmode">Configuration: <code>database.sqlmode</code><a href="#configuration-databasesqlmode" class="hash-link" aria-label="Direct link to configuration-databasesqlmode" title="Direct link to configuration-databasesqlmode">​</a></h3>
<p>Add the following line to your configuration at <code>/inc/base/config.php</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[database]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlmode = &quot;NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-databasecharset">Configuration: <code>database.charset</code><a href="#configuration-databasecharset" class="hash-link" aria-label="Direct link to configuration-databasecharset" title="Direct link to configuration-databasecharset">​</a></h3>
<p>Old installations of LanSuite stored data in the database with character collation set to <code>latin1</code>.
But LanSuite now uses <code>utf8mb4</code> by default.
Thus it is either required to modify database collation or to force character set back to <code>latin1</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="offline-conversion">Offline conversion<a href="#offline-conversion" class="hash-link" aria-label="Direct link to Offline conversion" title="Direct link to Offline conversion">​</a></h4>
<p>Changing the collation requires the following steps:</p>
<ul>
<li>Full SQL dump of the database (see backup)</li>
<li>Drop all tables</li>
<li>Change collation of database to <code>utf8mb4</code> (or drop database and recreate)</li>
<li>Re-import SQL dump with setting collation of the connection / file to <code>latin1</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="online-conversion">Online conversion<a href="#online-conversion" class="hash-link" aria-label="Direct link to Online conversion" title="Direct link to Online conversion">​</a></h4>
<p>The following steps in PHPmyAdmin <em>should</em> also work, this has not been confirmed yet:</p>
<p>Select the database.
Click the &quot;Operations&quot; tab.
Under &quot;Collation&quot; section, select the desired collation.
Click the &quot;Change all tables collations&quot; checkbox.
A new &quot;Change all tables columns collations&quot; checkbox will appear.
Click the &quot;Change all tables columns collations&quot; checkbox.
Click the &quot;Go&quot; button.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="force-latin1-as-workaround">Force latin1 as workaround<a href="#force-latin1-as-workaround" class="hash-link" aria-label="Direct link to Force latin1 as workaround" title="Direct link to Force latin1 as workaround">​</a></h4>
<p>If you want to enforce <code>latin1</code> as workaround you need to add the following key to the configuration file located at <code>/inc/base/config.php</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[database]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">charset = &quot;latin1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>** Do not change collation setting during normal operation and without doing the required conversion, this will cause data to be stored in both formats with no easy way to remediate **</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-google_maps_key">Configuration: <code>google_maps_key</code><a href="#configuration-google_maps_key" class="hash-link" aria-label="Direct link to configuration-google_maps_key" title="Direct link to configuration-google_maps_key">​</a></h3>
<p>A separate API Key has been introduced for usage of Google Maps. (#887)
Check the bottom of &quot;Admin-Page&quot; -&gt; &quot;Common Settings&quot; where the existing setting for the Analytics ID is located and add/copy the API key to be used for Google Maps API requests
Map display will be nonfunctional until the key is added.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fonts-in-ext_incpdf_fonts">Fonts in <code>ext_inc/pdf_fonts</code><a href="#fonts-in-ext_incpdf_fonts" class="hash-link" aria-label="Direct link to fonts-in-ext_incpdf_fonts" title="Direct link to fonts-in-ext_incpdf_fonts">​</a></h3>
<p>Delete the following files</p>
<ul>
<li><code>ext_inc/pdf_fonts/courier.php</code></li>
<li><code>ext_inc/pdf_fonts/helvetica.php</code></li>
<li><code>ext_inc/pdf_fonts/helveticab.php</code></li>
<li><code>ext_inc/pdf_fonts/helveticabi.php</code></li>
<li><code>ext_inc/pdf_fonts/helveticai.php</code></li>
<li><code>ext_inc/pdf_fonts/symbol.php</code></li>
<li><code>ext_inc/pdf_fonts/times.php</code></li>
<li><code>ext_inc/pdf_fonts/timesb.php</code></li>
<li><code>ext_inc/pdf_fonts/timesbi.php</code></li>
<li><code>ext_inc/pdf_fonts/timesi.php</code></li>
<li><code>ext_inc/pdf_fonts/zapfdingbats.php</code></li>
</ul>
<p>Delete the following folder</p>
<ul>
<li><code>ext_inc/pdf_fonts/makefont</code></li>
</ul>
<p>Add the following files from the release package to the <code>ext_inc/pdf_fonts</code> folder</p>
<ul>
<li><code>ext_inc/pdf_fonts/.gitkeep</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="files-in-ext_incuser_pics">Files in <code>ext_inc/user_pics</code><a href="#files-in-ext_incuser_pics" class="hash-link" aria-label="Direct link to files-in-ext_incuser_pics" title="Direct link to files-in-ext_incuser_pics">​</a></h3>
<p>Delete the following files</p>
<ul>
<li><code>ext_inc/user_pics/info.txt</code></li>
<li><code>ext_inc/user_pics/pic_.jpg</code></li>
</ul>
<p>Add the following files from the release package to the <code>ext_inc/user_pics</code> folder</p>
<ul>
<li><code>ext_inc/user_pics/.gitkeep</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="removal-of-files-of-deprecates-leagues-like-wwcl-ngl-and-lgz-files">Removal of files of deprecates leagues like WWCL, NGL and LGZ files<a href="#removal-of-files-of-deprecates-leagues-like-wwcl-ngl-and-lgz-files" class="hash-link" aria-label="Direct link to Removal of files of deprecates leagues like WWCL, NGL and LGZ files" title="Direct link to Removal of files of deprecates leagues like WWCL, NGL and LGZ files">​</a></h3>
<p>Delete the following files:</p>
<ul>
<li><code>ext_inc/tournament_rules/gameini.xml</code></li>
<li><code>ext_inc/tournament_rules/games.xml</code></li>
<li><code>ext_inc/tournament_rules/xml_games.xml</code></li>
<li><code>ext_inc/tournament_rules/info.txt</code></li>
</ul>
<p>Delete the following folders:</p>
<ul>
<li><code>ext_inc/tournament_icons/leagues/</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="converting-custom-fonts">Converting custom fonts<a href="#converting-custom-fonts" class="hash-link" aria-label="Direct link to Converting custom fonts" title="Direct link to Converting custom fonts">​</a></h3>
<p>If you have added your own custom fonts into <code>ext_inc/pdf_fonts</code>, you need to convert them into the new fpdf format:</p>
<ol>
<li>Go to <a href="http://www.fpdf.org/makefont/" target="_blank" rel="noopener noreferrer">http://www.fpdf.org/makefont/</a></li>
<li>Choose your custom font file (ttf)</li>
<li>Download the generated *.z and *.php file</li>
<li>Add the <code>*.ttf</code>, <code>*.z</code> and <code>*.php</code> into <code>ext_inc/pdf_fonts</code></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="server-module-change-of-hardware-information-from-megabyte-to-gigabyte-for-ram-and-from-megaherz-to-gigaherz-for-cpu">Server module: Change of hardware information from Megabyte to Gigabyte (for RAM) and from Megaherz to Gigaherz for CPU<a href="#server-module-change-of-hardware-information-from-megabyte-to-gigabyte-for-ram-and-from-megaherz-to-gigaherz-for-cpu" class="hash-link" aria-label="Direct link to Server module: Change of hardware information from Megabyte to Gigabyte (for RAM) and from Megaherz to Gigaherz for CPU" title="Direct link to Server module: Change of hardware information from Megabyte to Gigabyte (for RAM) and from Megaherz to Gigaherz for CPU">​</a></h3>
<p>The meaning of the fields following fields has changed:</p>
<p>Before:</p>
<ul>
<li><code>CPU (MHz)</code></li>
<li><code>RAM (MB)</code></li>
</ul>
<p>After:</p>
<ul>
<li><code>CPU (GHz)</code></li>
<li><code>RAM (GB)</code></li>
</ul>
<p>LanSuite is not taking care about the update of your data.
Please go to the Server module and change the CPU and RAM values for your servers manually.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/lansuite/lansuite/tree/master/website/docs/guides/guides-upgrade.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/lansuite/docs/category/guides/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Guides</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/lansuite/docs/category/development/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Development</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#preparation" class="table-of-contents__link toc-highlight">Preparation</a><ul><li><a href="#upgrade-communications" class="table-of-contents__link toc-highlight">Upgrade communications</a></li><li><a href="#download-an-official-release" class="table-of-contents__link toc-highlight">Download an official release</a></li><li><a href="#set-system-to-read-only" class="table-of-contents__link toc-highlight">Set system to read-only</a></li><li><a href="#execute-a-backup" class="table-of-contents__link toc-highlight">Execute a backup</a></li><li><a href="#server-upload" class="table-of-contents__link toc-highlight">Server Upload</a></li></ul></li><li><a href="#upgrade" class="table-of-contents__link toc-highlight">Upgrade</a><ul><li><a href="#copy-over-files-from-an-old-installation" class="table-of-contents__link toc-highlight">Copy over files from an old installation</a></li><li><a href="#configuration-environmentconfigured" class="table-of-contents__link toc-highlight">Configuration: <code>environment.configured</code></a></li><li><a href="#run-specific-release-tasks" class="table-of-contents__link toc-highlight">Run specific release tasks</a></li><li><a href="#execute-lansuite-upgrade-logic" class="table-of-contents__link toc-highlight">Execute LanSuite upgrade logic</a></li><li><a href="#test-your-installation" class="table-of-contents__link toc-highlight">Test your installation</a></li><li><a href="#unlock-installation" class="table-of-contents__link toc-highlight">Unlock installation</a></li></ul></li><li><a href="#rollback-if-things-doesnt-work" class="table-of-contents__link toc-highlight">Rollback (if things doesn&#39;t work)</a><ul><li><a href="#import-db-backup" class="table-of-contents__link toc-highlight">Import DB backup</a></li><li><a href="#restore-folder-backup" class="table-of-contents__link toc-highlight">Restore folder backup</a></li></ul></li><li><a href="#pitfalls-and-known-bugs" class="table-of-contents__link toc-highlight">Pitfalls and Known Bugs</a></li><li><a href="#upgrade-from-lansuite-v42-to-v50" class="table-of-contents__link toc-highlight">Upgrade from LanSuite v4.2 to v5.0</a><ul><li><a href="#configuration-databasesqlmode" class="table-of-contents__link toc-highlight">Configuration: <code>database.sqlmode</code></a></li><li><a href="#configuration-databasecharset" class="table-of-contents__link toc-highlight">Configuration: <code>database.charset</code></a></li><li><a href="#configuration-google_maps_key" class="table-of-contents__link toc-highlight">Configuration: <code>google_maps_key</code></a></li><li><a href="#fonts-in-ext_incpdf_fonts" class="table-of-contents__link toc-highlight">Fonts in <code>ext_inc/pdf_fonts</code></a></li><li><a href="#files-in-ext_incuser_pics" class="table-of-contents__link toc-highlight">Files in <code>ext_inc/user_pics</code></a></li><li><a href="#removal-of-files-of-deprecates-leagues-like-wwcl-ngl-and-lgz-files" class="table-of-contents__link toc-highlight">Removal of files of deprecates leagues like WWCL, NGL and LGZ files</a></li><li><a href="#converting-custom-fonts" class="table-of-contents__link toc-highlight">Converting custom fonts</a></li><li><a href="#server-module-change-of-hardware-information-from-megabyte-to-gigabyte-for-ram-and-from-megaherz-to-gigaherz-for-cpu" class="table-of-contents__link toc-highlight">Server module: Change of hardware information from Megabyte to Gigabyte (for RAM) and from Megaherz to Gigaherz for CPU</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/lansuite/docs/category/getting-started/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/lansuite/docs/category/guides/">Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/lansuite/docs/category/development/">Development</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/lansuite/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/lansuite/lansuite" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 LANSuite team and contributors.</div></div></div></footer></div>
</body>
</html>